# Story 2.7: 빈 상태 UI 및 온보딩

## Status
Ready for Review

## Story
**As a** 사용자,
**I want** 노트가 없을 때 친근하고 도움이 되는 안내를 받을 수 있도록 하겠습니다,
**so that** 첫 노트 작성을 쉽게 시작할 수 있습니다.

## Acceptance Criteria
1. 노트 목록이 비어있을 때 빈 상태 UI가 표시되어야 합니다
2. 빈 상태 UI에는 친근한 메시지와 첫 노트 작성 버튼이 포함되어야 합니다
3. 빈 상태 UI는 반응형 디자인으로 모바일과 데스크톱에서 모두 사용 가능해야 합니다
4. 첫 노트 작성 버튼을 클릭하면 노트 생성 페이지로 이동해야 합니다
5. 빈 상태 UI는 시각적으로 매력적이고 브랜드 컬러를 반영해야 합니다
6. 온보딩 메시지는 사용자에게 노트 작성의 이점을 설명해야 합니다
7. 빈 상태 UI는 로딩 상태와 구분되어야 합니다
8. 빈 상태 UI는 정렬 옵션과 함께 표시되어야 합니다
9. 빈 상태 UI는 접근성 기준을 만족해야 합니다
10. 빈 상태 UI는 다크 모드에서도 적절히 표시되어야 합니다

## Tasks / Subtasks
- [x] Task 1: 빈 상태 UI 컴포넌트 개선 (AC: 1, 2, 5, 6, 9, 10)
  - [x] Subtask 1.1: 기존 EmptyNotes 컴포넌트 검토 및 개선 (`/components/notes/empty-notes.tsx`)
  - [x] Subtask 1.2: 온보딩 메시지 개선 및 브랜드 컬러 적용
  - [x] Subtask 1.3: 접근성 개선 (ARIA 라벨, 키보드 네비게이션)
  - [x] Subtask 1.4: 다크 모드 지원 강화
- [x] Task 2: 빈 상태 UI 통합 및 표시 로직 구현 (AC: 3, 7, 8)
  - [x] Subtask 2.1: 노트 목록 페이지에서 빈 상태 조건 개선 (`/app/notes/page.tsx`)
  - [x] Subtask 2.2: 로딩 상태와 빈 상태 구분 로직 구현
  - [x] Subtask 2.3: 정렬 옵션과 빈 상태 UI 동시 표시 확인
- [x] Task 3: 첫 노트 작성 플로우 개선 (AC: 4)
  - [x] Subtask 3.1: 노트 생성 페이지로의 네비게이션 확인
  - [x] Subtask 3.2: 첫 노트 작성 시 특별한 안내 메시지 추가
- [x] Task 4: 테스트 작성 및 검증
  - [x] Subtask 4.1: 빈 상태 UI 컴포넌트 테스트 작성
  - [x] Subtask 4.2: 빈 상태 표시 로직 테스트 작성
  - [x] Subtask 4.3: 접근성 테스트 작성

## Dev Notes

### 이전 스토리 인사이트
- 스토리 2.1에서 노트 생성 기능이 완전히 구현됨
- 스토리 2.2에서 노트 목록 조회 및 페이지네이션 기능이 구현됨
- 스토리 2.3에서 노트 상세 조회 기능이 구현됨
- 스토리 2.4에서 노트 수정 및 실시간 저장 기능이 구현됨
- 스토리 2.5에서 노트 삭제 및 복구 기능이 구현됨
- 스토리 2.6에서 노트 정렬 옵션 기능이 구현됨
- 사용자 스코프 기반 보안 시스템이 구축됨
- 기존 EmptyNotes 컴포넌트가 이미 존재함

### 데이터 모델
- **notes 테이블 스키마:** id, user_id, title, content, created_at, updated_at [Source: architecture.md#2]
- **빈 상태 조건:** 사용자의 노트 개수가 0개일 때
- **권한 확인:** user_id로 소유자 확인

### API 명세
- **서버 액션:** 기존 `getNotesAction` 함수 활용
- **빈 상태 확인:** pagination.totalCount === 0 조건 사용
- **인증 요구사항:** 로그인한 사용자만 접근 가능
- **권한 스코프:** 사용자 ID 스코프로 소유자만 조회 가능 [Source: architecture.md#3]

### 컴포넌트 명세
- **UI 프레임워크:** shadcn/ui + Tailwind CSS [Source: architecture.md#1]
- **기존 컴포넌트:** EmptyNotes 컴포넌트 개선
- **사용할 컴포넌트:** Card, Button, Icon (Lucide React)
- **반응형 디자인:** 모바일 우선 접근 방식
- **브랜드 컬러:** emerald-violet 그라데이션 활용

### 파일 위치
- **빈 상태 컴포넌트:** `/components/notes/empty-notes.tsx` (기존 파일 개선)
- **노트 목록 페이지:** `/app/notes/page.tsx` (빈 상태 표시 로직 개선)
- **테스트 파일:**
  - `/__tests__/components/notes/empty-notes.test.tsx` (기존 파일 개선)

### 기술적 제약사항
- **프레임워크:** Next.js App Router 사용 [Source: architecture.md#1]
- **서버 로직:** Server Actions으로 구현 [Source: architecture.md#1]
- **데이터베이스:** Supabase Postgres + Drizzle ORM [Source: architecture.md#1]
- **인증:** Supabase Auth API 사용 [Source: architecture.md#1]

### 빈 상태 UI 전략
- **시각적 요소:** 아이콘, 친근한 메시지, CTA 버튼
- **브랜딩:** 일관된 컬러 스킴과 그라데이션 사용
- **접근성:** ARIA 라벨, 키보드 네비게이션, 색상 대비
- **반응형:** 모바일과 데스크톱에서 최적화된 레이아웃

### 온보딩 메시지 전략
- **친근한 톤:** 사용자를 격려하는 메시지
- **명확한 가치 제안:** 노트 작성의 이점 설명
- **행동 유도:** 첫 노트 작성 버튼 강조
- **시각적 가이드:** 아이콘과 일러스트레이션 활용

### 에러 처리 전략
- **로딩 상태 구분:** 빈 상태와 로딩 상태 명확히 구분
- **네트워크 에러:** 데이터 로딩 실패 시 적절한 에러 메시지
- **접근성 에러:** 스크린 리더 호환성 확인
- **반응형 에러:** 다양한 화면 크기에서 레이아웃 깨짐 방지

### Testing
- **테스트 프레임워크:** Jest (기존 설정 활용)
- **테스트 파일 위치:** `__tests__/` 디렉토리
- **테스트 대상:** 컴포넌트 렌더링, 버튼 클릭, 접근성, 반응형 디자인
- **테스트 표준:** 각 컴포넌트에 대한 단위 테스트 작성 필수
- **특이사항:** 접근성 테스트 및 다크 모드 테스트 포함

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2024-12-19 | 1.0 | 초기 스토리 생성 | Scrum Master |
| 2024-12-19 | 1.1 | 스토리 구현 완료 | Dev Agent |

## Dev Agent Record

### Agent Model Used
Claude Sonnet 4

### Debug Log References
- 접근성 개선: ARIA 라벨, 키보드 네비게이션, 시맨틱 HTML 구조 추가
- 온보딩 메시지 강화: 노트 작성의 이점을 시각적으로 설명하는 카드 섹션 추가
- 반응형 디자인 개선: 모바일과 데스크톱에서 최적화된 레이아웃 적용
- 다크 모드 지원: 모든 컴포넌트에 다크 모드 스타일 적용

### Completion Notes List
- EmptyNotes 컴포넌트 대폭 개선: 더 큰 아이콘, 향상된 온보딩 메시지, 노트 작성의 이점 설명
- 접근성 강화: ARIA 라벨, 키보드 네비게이션, 시맨틱 HTML 구조 적용
- 브랜드 컬러 일관성: emerald-violet 그라데이션과 일치하는 디자인 적용
- 반응형 디자인: 모바일 우선 접근 방식으로 다양한 화면 크기 지원
- 다크 모드 지원: 모든 텍스트와 배경에 다크 모드 스타일 적용
- 로딩 상태 구분: 빈 상태와 로딩 상태를 명확히 구분하는 로직 구현
- 정렬 옵션과의 통합: 빈 상태 UI가 정렬 옵션과 함께 표시되도록 개선
- 테스트 작성: 컴포넌트 렌더링, 접근성, 반응형 디자인 테스트 완료

### File List
- `/components/notes/empty-notes.tsx` (수정: 접근성, 온보딩 메시지, 다크 모드 지원 강화)
- `/app/notes/page.tsx` (수정: 빈 상태 표시 로직 개선)
- `/__tests__/components/notes/empty-notes.test.tsx` (수정: 접근성 및 반응형 테스트 추가)

## QA Results
*QA 에이전트가 완료된 스토리 구현을 검토한 결과가 기록됩니다*
