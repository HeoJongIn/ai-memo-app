# Story 2.2: 노트 목록 조회 및 페이지네이션

## Status
Ready for Review

## Story
**As a** 사용자,
**I want** 내가 작성한 노트들의 목록을 조회하고 페이지네이션을 통해 효율적으로 탐색할 수 있도록 하겠습니다,
**so that** 많은 노트들 중에서 원하는 내용을 빠르게 찾고 관리할 수 있습니다.

## Acceptance Criteria
1. 사용자의 모든 노트가 목록 형태로 표시되어야 합니다
2. 노트 목록은 최신순으로 정렬되어야 합니다
3. 각 노트는 제목, 본문 미리보기, 생성일시가 표시되어야 합니다
4. 페이지네이션을 통해 노트를 페이지별로 나누어 표시해야 합니다
5. 빈 상태일 때는 적절한 안내 메시지가 표시되어야 합니다
6. 노트 클릭 시 상세 페이지로 이동해야 합니다
7. 반응형 디자인으로 모바일과 데스크톱에서 모두 사용 가능해야 합니다

## Tasks / Subtasks
- [x] Task 1: 노트 목록 페이지 구현 (AC: 1, 2, 3, 7)
  - [x] Subtask 1.1: 노트 목록 페이지 컴포넌트 생성
  - [x] Subtask 1.2: 노트 카드 컴포넌트 구현 (제목, 미리보기, 날짜)
  - [x] Subtask 1.3: 최신순 정렬 로직 구현
  - [x] Subtask 1.4: 반응형 그리드 레이아웃 적용
- [x] Task 2: 페이지네이션 구현 (AC: 4)
  - [x] Subtask 2.1: 페이지네이션 컴포넌트 생성
  - [x] Subtask 2.2: 페이지별 노트 조회 로직 구현
  - [x] Subtask 2.3: 페이지 네비게이션 상태 관리
- [x] Task 3: 빈 상태 및 사용자 피드백 구현 (AC: 5, 6)
  - [x] Subtask 3.1: 빈 상태 UI 컴포넌트 구현
  - [x] Subtask 3.2: 노트 클릭 시 상세 페이지 이동 구현
  - [x] Subtask 3.3: 로딩 상태 표시 구현
- [x] Task 4: 테스트 작성 및 검증
  - [x] Subtask 4.1: 노트 목록 컴포넌트 단위 테스트 작성
  - [x] Subtask 4.2: 페이지네이션 컴포넌트 테스트 작성
  - [x] Subtask 4.3: 통합 테스트 작성

## Dev Notes

### 이전 스토리 인사이트
- 스토리 2.1에서 노트 생성 기능이 완전히 구현됨
- createNoteAction 서버 액션이 사용자 스코프 기반으로 작동
- 토스트 메시지 시스템이 구축되어 있음
- 메인 페이지에서 노트 생성 페이지로 연결됨

### 데이터 모델
- **notes 테이블 스키마:** id, user_id, title, content, created_at, updated_at [Source: architecture.md#2]
- **조회 필드:** id, title, content (미리보기용), created_at, updated_at
- **정렬 기준:** updated_at DESC (최신순)

### API 명세
- **서버 액션:** getUserNotes(userId: string) [기존 함수 활용]
- **페이지네이션:** offset, limit 파라미터 추가 필요
- **인증 요구사항:** 로그인한 사용자만 접근 가능
- **권한 스코프:** 사용자 ID 스코프로 소유자만 조회 가능 [Source: architecture.md#3]

### 컴포넌트 명세
- **UI 프레임워크:** shadcn/ui + Tailwind CSS [Source: architecture.md#1]
- **사용할 컴포넌트:** Card, Button, Pagination (새로 생성 필요)
- **반응형 디자인:** 모바일 우선 접근 방식

### 파일 위치
- **노트 목록 페이지:** `/app/notes/page.tsx` (새로 생성)
- **노트 카드 컴포넌트:** `/components/notes/note-card.tsx` (새로 생성)
- **페이지네이션 컴포넌트:** `/components/ui/pagination.tsx` (새로 생성)
- **빈 상태 컴포넌트:** `/components/notes/empty-notes.tsx` (새로 생성)
- **서버 액션:** `/lib/actions/notes.ts` (기존 파일 수정)
- **테스트 파일:** `/__tests__/components/notes/note-card.test.tsx` (새로 생성)

### 기술적 제약사항
- **프레임워크:** Next.js App Router 사용 [Source: architecture.md#1]
- **서버 로직:** Server Actions으로 구현 [Source: architecture.md#1]
- **데이터베이스:** Supabase Postgres + Drizzle ORM [Source: architecture.md#1]
- **인증:** Supabase Auth API 사용 [Source: architecture.md#1]

### 페이지네이션 전략
- **페이지 크기:** 10개 노트 per 페이지
- **네비게이션:** 이전/다음 버튼 + 페이지 번호
- **URL 상태:** 쿼리 파라미터로 페이지 번호 관리

### Testing
- **테스트 프레임워크:** Jest (기존 설정 활용)
- **테스트 파일 위치:** `__tests__/` 디렉토리
- **테스트 대상:** 컴포넌트 렌더링, 페이지네이션 로직, 빈 상태 표시, 노트 클릭 이벤트
- **테스트 표준:** 각 컴포넌트와 함수에 대한 단위 테스트 작성 필수

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2024-12-19 | 1.0 | 초기 스토리 생성 | Scrum Master |

## Dev Agent Record

### Agent Model Used
Claude Sonnet 4 (2024-12-19)

### Debug Log References
- 노트 목록 페이지 및 컴포넌트 구현 완료
- 페이지네이션 시스템 구현 완료
- 빈 상태 UI 및 사용자 피드백 구현 완료
- 테스트 파일 작성 완료

### Completion Notes List
- app/notes/page.tsx: 노트 목록 페이지 컴포넌트 생성 (페이지네이션, 로딩 상태 포함)
- components/notes/note-card.tsx: 노트 카드 컴포넌트 구현 (제목, 미리보기, 날짜 표시)
- components/ui/pagination.tsx: 페이지네이션 컴포넌트 구현 (이전/다음 버튼, 페이지 번호)
- components/notes/empty-notes.tsx: 빈 상태 UI 컴포넌트 구현
- lib/actions/notes.ts: getUserNotesPaginated 및 getNotesAction 서버 액션 추가
- __tests__/components/notes/note-card.test.tsx: 노트 카드 컴포넌트 단위 테스트 작성
- __tests__/components/ui/pagination.test.tsx: 페이지네이션 컴포넌트 테스트 작성
- __tests__/lib/actions/notes-pagination.test.ts: 페이지네이션 서버 액션 테스트 작성
- 모든 Acceptance Criteria 충족 확인
- 반응형 디자인 적용 완료
- 사용자 스코프 기반 보안 구현 완료

### File List
- app/notes/page.tsx (새로 생성)
- components/notes/note-card.tsx (새로 생성)
- components/ui/pagination.tsx (새로 생성)
- components/notes/empty-notes.tsx (새로 생성)
- lib/actions/notes.ts (수정 - 페이지네이션 함수 추가)
- __tests__/components/notes/note-card.test.tsx (새로 생성)
- __tests__/components/ui/pagination.test.tsx (새로 생성)
- __tests__/lib/actions/notes-pagination.test.ts (새로 생성)

## QA Results
*QA 에이전트가 완료된 스토리 구현을 검토한 결과가 기록됩니다*
